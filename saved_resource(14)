AUI.add("liferay-layout-column",function(a){var d=a.DD.DDM;var c=Liferay.Layout;var e="dragging";c.getLastPortletNode=function(h){var f=this;var g=h.all(c.options.portletBoundary);var i=g.size()-1;return g.item(i)};c.findSiblingPortlet=function(g,i){var f=c.options.dragNodes;var h=g.get(i);while(h&&!h.test(f)){h=h.get(i)}return h};c.register=function(){var f=a.merge(c.DEFAULT_LAYOUT_OPTIONS,{after:{"drag:start":function(h){var g=d.activeDrag.get("node");var i=g.get("id");c.PORTLET_TOPPER.html(c._getPortletTitle(i));if(Liferay.Data.isCustomizationView()){c.DEFAULT_LAYOUT_OPTIONS.dropNodes.addClass("customizable")}c._columnContainer.addClass(e)},"drag:end":function(g){c._columnContainer.removeClass(e)}},on:{"drag:start":function(g){Liferay.fire("portletDragStart")},"drop:enter":function(g){Liferay.Layout.updateOverNestedPortletInfo()},"drop:exit":function(g){Liferay.Layout.updateOverNestedPortletInfo()},placeholderAlign:function(v){var n=v.currentTarget;var y=n.activeDrop;var i=n.lastActiveDrop;if(i){var r=y.get("node");var h=i.get("node");var t=n.quadrant;var q=r.isStatic;if(q){var o=(q=="start");var m=(o?"nextSibling":"previousSibling");var s=c.findSiblingPortlet(r,m);var w=(s&&(s.isStatic==q));if(w||(o&&(t<=2))||(!o&&(t>=3))){v.halt()}}var x=!r.drop;if(!c.OVER_NESTED_PORTLET&&x){var l=r.get("id");var j=c.EMPTY_COLUMNS[l];if(!j){if(r!=h){var u=c.getLastPortletNode(r);if(u&&u.isStatic){var k=c.options;var g=r.one(k.dropContainer);var z=c.findReferencePortlet(g);if(z){u=z}}var p=a.DD.DDM.getDrop(u);if(p){n.quadrant=4;n.activeDrop=p;n.lastAlignDrop=p}n._syncPlaceholderUI()}v.halt()}}if(c.OVER_NESTED_PORTLET&&(r==h)){v.halt()}}}}});c._columnContainer=a.all(c._layoutContainer);c.layoutHandler=new c.ColumnLayout(f);c.syncDraggableClassUI()};var b=a.Component.create({ATTRS:{proxyNode:{value:c.PROXY_NODE}},NAME:"ColumnLayout",EXTENDS:a.SortableLayout,prototype:{dragItem:0,_positionNode:function(j){var f=this;var k=j.currentTarget;var i=k.lastAlignDrop||k.activeDrop;if(i){var h=i.get("node");var g=h.isStatic;if(g){var l=(g=="start");k.quadrant=(l?4:1)}b.superclass._positionNode.apply(this,arguments)}},_syncProxyNodeSize:function(){var f=this;var h=d.activeDrag.get("dragNode");var g=f.get("proxyNode");if(g&&h){h.set("offsetHeight",30);h.set("offsetWidth",200);g.set("offsetHeight",30);g.set("offsetWidth",200)}}}});c.ColumnLayout=b},"",{requires:["aui-sortable-layout","dd"]});YUI.add("dd-scroll",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r,i,s="host",o="buffer",u="parentScroll",a="windowScroll",f="scrollTop",l="scrollLeft",c="offsetWidth",h="offsetHeight";n.ATTRS={parentScroll:{value:!1,setter:function(e){return e?e:!1}},buffer:{value:30,validator:e.Lang.isNumber},scrollDelay:{value:235,validator:e.Lang.isNumber},host:{value:null},windowScroll:{value:!1,validator:e.Lang.isBoolean},vertical:{value:!0,validator:e.Lang.isBoolean},horizontal:{value:!0,validator:e.Lang.isBoolean}},e.extend(n,e.Base,{_scrolling:null,_vpRegionCache:null,_dimCache:null,_scrollTimer:null,_getVPRegion:function(){var e={},t=this.get(u),n=this.get(o),r=this.get(a),i=r?[]:t.getXY(),s=r?"winWidth":c,p=r?"winHeight":h,d=r?t.get(f):i[1],v=r?t.get(l):i[0];return e={top:d+n,right:t.get(s)+v-n,bottom:t.get(p)+d-n,left:v+n},this._vpRegionCache=e,e},initializer:function(){var t=this.get(s);t.after("drag:start",e.bind(this.start,this)),t.after("drag:end",e.bind(this.end,this)),t.on("drag:align",e.bind(this.align,this)),e.one("win").on("scroll",e.bind(function(){this._vpRegionCache=null},this))},_checkWinScroll:function(e){var t=this._getVPRegion(),n=this.get(s),r=this.get(a),i=n.lastXY,c=!1,h=this.get(o),p=this.get(u),d=p.get(f),v=p.get(l),m=this._dimCache.w,g=this._dimCache.h,y=i[1]+g,b=i[1],w=i[0]+m,E=i[0],S=b,x=E,T=d,N=v;this.get("horizontal")&&(E<=t.left&&(c=!0,x=i[0]-(r?h:0),N=v-h),w>=t.right&&(c=!0,x=i[0]+(r?h:0),N=v+h)),this.get("vertical")&&(y>=t.bottom&&(c=!0,S=i[1]+(r?h:0),T=d+h),b<=t.top&&(c=!0,S=i[1]-(r?h:0),T=d-h)),T<0&&(T=0,S=i[1]),N<0&&(N=0,x=i[0]),S<0&&(S=i[1]),x<0&&(x=i[0]),e?(n.actXY=[x,S],n._alignNode([x,S],!0),i=n.actXY,n.actXY=[x,S],n._moveNode({node:p,top:T,left:N}),!T&&!N&&this._cancelScroll()):c?this._initScroll():this._cancelScroll()},_initScroll:function(){this._cancelScroll(),this._scrollTimer=e.Lang.later(this.get("scrollDelay"),this,this._checkWinScroll,[!0],!0)},_cancelScroll:function(){this._scrolling=!1,this._scrollTimer&&(this._scrollTimer.cancel(),delete this._scrollTimer)},align:function(e){this._scrolling&&(this._cancelScroll(),e.preventDefault()),this._scrolling||this._checkWinScroll()},_setDimCache:function(){var e=this.get(s).get("dragNode");this._dimCache={h:e.get(h),w:e.get(c)}},start:function(){this._setDimCache()},end:function(){this._dimCache=null,this._cancelScroll()}}),e.namespace("Plugin"),r=function(){r.superclass.constructor.apply(this,arguments)},r.ATTRS=e.merge(n.ATTRS,{windowScroll:{value:!0,setter:function(t){return t&&this.set(u,e.one("win")),t}}}),e.extend(r,n,{initializer:function(){this.set("windowScroll",this.get("windowScroll"))}}),r.NAME=r.NS="winscroll",e.Plugin.DDWinScroll=r,i=function(){i.superclass.constructor.apply(this,arguments)},i.ATTRS=e.merge(n.ATTRS,{node:{value:!1,setter:function(t){var n=e.one(t);return n?this.set(u,n):t!==!1&&e.error("DDNodeScroll: Invalid Node Given: "+t),n}}}),e.extend(i,n,{initializer:function(){this.set("node",this.get("node"))}}),i.NAME=i.NS="nodescroll",e.Plugin.DDNodeScroll=i,e.DD.Scroll=n},"patched-v3.11.0",{requires:["dd-drag"]});YUI.add("dd-proxy",function(e,t){var n=e.DD.DDM,r="node",i="dragNode",s="host",o=!0,u,a=function(){a.superclass.constructor.apply(this,arguments)};a.NAME="DDProxy",a.NS="proxy",a.ATTRS={host:{},moveOnEnd:{value:o},hideOnEnd:{value:o},resizeFrame:{value:o},positionProxy:{value:o},borderStyle:{value:"1px solid #808080"},cloneNode:{value:!1}},u={_hands:null,_init:function(){if(!n._proxy){n._createFrame(),e.on("domready",e.bind(this._init,this));return}this._hands||(this._hands=[]);var t,o,u=this.get(s),a=u.get(i);a.compareTo(u.get(r))&&n._proxy&&u.set(i,n._proxy),e.Array.each(this._hands,function(e){e.detach()}),t=n.on("ddm:start",e.bind(function(){n.activeDrag===u&&n._setFrame(u)},this)),o=n.on("ddm:end",e.bind(function(){u.get("dragging")&&(this.get("moveOnEnd")&&u.get(r).setXY(u.lastXY),this.get("hideOnEnd")&&u.get(i).setStyle("display","none"),this.get("cloneNode")&&(u.get(i).remove(),u.set(i,n._proxy)))},this)),this._hands=[t,o]},initializer:function(){this._init()},destructor:function(){var t=this.get(s);e.Array.each(this._hands,function(e){e.detach()}),t.set(i,t.get(r))},clone:function(){var t=this.get(s),n=t.get(r),o=n.cloneNode(!0);return delete o._yuid,o.setAttribute("id",e.guid()),o.setStyle("position","absolute"),n.get("parentNode").appendChild(o),t.set(i,o),o}},e.namespace("Plugin"),e.extend(a,e.Base,u),e.Plugin.DDProxy=a,e.mix(n,{_createFrame:function(){if(!n._proxy){n._proxy=o;var t=e.Node.create("<div></div>"),r=e.one("body");t.setStyles({position:"absolute",display:"none",zIndex:"999",top:"-999px",left:"-999px"}),r.prepend(t),t.set("id",e.guid()),t.addClass(n.CSS_PREFIX+"-proxy"),n._proxy=t}},_setFrame:function(e){var t=e.get(r),s=e.get(i),o,u="auto";o=n.activeDrag.get("activeHandle"),o&&(u=o.getStyle("cursor")),u==="auto"&&(u=n.get("dragCursor")),s.setStyles({visibility:"hidden",display:"block",cursor:u,border:e.proxy.get("borderStyle")}),e.proxy.get("cloneNode")&&(s=e.proxy.clone()),e.proxy.get("resizeFrame")&&s.setStyles({height:t.get("offsetHeight")+"px",width:t.get("offsetWidth")+"px"}),e.proxy.get("positionProxy")&&s.setXY(e.nodeXY),s.setStyle("visibility","visible")}})},"patched-v3.11.0",{requires:["dd-drag"]});YUI.add("aui-sortable-layout",function(e,t){var n=e.Lang,r=n.isBoolean,i=n.isFunction,s=n.isObject,o=n.isString,u=n.isValue,a=n.toInt,f=Math.ceil,l=e.DD.DDM,c="append",h="circle",p="delegateConfig",d="down",v="drag",m="dragNode",g="dragNodes",y="dropContainer",b="dropNodes",w="groups",E="icon",S="indicator",x="l",T="lazyStart",N="left",C="marginBottom",k="marginTop",L="node",A="offsetHeight",O="offsetWidth",M="placeAfter",_="placeBefore",D="placeholder",P="prepend",H="proxy",B="proxyNode",j="r",F="region",I="right",q="sortable-layout",R=" ",U="target",z="triangle",W="up",X="placeholderAlign",V="quadrantEnter",$="quadrantExit",J="quadrantOver",K=0,Q=0,G=0,Y=0,Z=function(t){return t instanceof e.NodeList},et=function(){return Array.prototype.slice.call(arguments).join(R)},tt=function(t){return Z(t)?t:e.all(t)},nt=function(e,t){return a(e.getStyle(t))},rt=e.getClassName,it=rt(q,v,S),st=rt(q,v,S,E),ot=rt(q,v,S,E,N),ut=rt(q,v,S,E,I),at=rt(q,v,U,S),ft=rt(E),lt=rt(E,h,z,x),ct=rt(E,h,z,j),ht='<div class="'+it+'">'+'<div class="'+et(st,ot,ft,ct)+'"></div>'+'<div class="'+et(st,ut,ft,lt)+'"></div>'+"<div>",pt=e.Component.create({NAME:q,ATTRS:{delegateConfig:{value:null,setter:function(t){var n=this,r=e.merge({bubbleTargets:n,dragConfig:{},nodes:n.get(g),target:!0},t);return e.mix(r.dragConfig,{groups:n.get(w),startCentered:!0}),r},validator:s},proxyNode:{setter:function(t){return o(t)?e.Node.create(t):t}},dragNodes:{validator:o},dropContainer:{value:function(e){return e},validator:i},dropNodes:{setter:"_setDropNodes"},groups:{value:[q]},lazyStart:{value:!1,validator:r},placeholder:{value:ht,setter:function(t){var n=o(t)?e.Node.create(t):t;return n.inDoc()||e.getBody().prepend(n.hide()),K=nt(n,C),Q=nt(n,k),n.addClass(at),G=nt(n,C),Y=nt(n,k),n}},proxy:{value:null,setter:function(t){var n=this,r={moveOnEnd:!1,positionProxy:!1};return n.get(B)&&(r.borderStyle=null),e.merge(r,t||{})}}},EXTENDS:e.Base,prototype:{initializer:function(){var e=this;e.bindUI()},bindUI:function(){var e=this;e.publish(X,{defaultFn:e._defPlaceholderAlign,queuable:!1,emitFacade:!0,bubbles:!0}),e._bindDDEvents(),e._bindDropZones()},addDropNode:function(t,n){var r=this;t=e.one(t),l.getDrop(t)||r.addDropTarget(new e.DD.Drop(e.merge({bubbleTargets:r,groups:r.get(w),node:t},n)))},addDropTarget:function(e){var t=this;e.addToGroup(t.get(w))},alignPlaceholder:function(e,t){var n=this,r=n.get(D);n.lazyEvents||r.show(),n._syncPlaceholderSize(),r.setXY(n.getPlaceholderXY(e,t))},calculateDirections:function(e){var t=this,n=t.lastY,r=t.lastX,i=e.lastXY[0],s=e.lastXY[1];i!=r&&(t.XDirection=i<r?N:I),s!=n&&(t.YDirection=s<n?W:d),t.lastX=i,t.lastY=s},calculateQuadrant:function(e,t){var n=this,r=1,i=t.get(L).get(F),s=e.mouseXY,o=s[0],u=s[1],a=i.top,f=i.left,l=a+(i.bottom-a)/2,c=f+(i.right-f)/2;return u<l?r=o>c?1:2:r=o<c?3:4,n.quadrant=r,r},getPlaceholderXY:function(e,t){var n=this,r=n.get(D),i=K,s=Q;t&&(i=G,s=Y),r.toggleClass(at,t);var o=f(e.bottom),u=f(e.left),a=f(e.top),l=u,c=n.quadrant<3?a-(r.get(A)+i):o+s;return[l,c]},removeDropTarget:function(e){var t=this;e.removeFromGroup(t.get(w))},_alignCondition:function(){var e=this,t=l.activeDrag,n=e.activeDrop;if(t&&n){var r=t.get(L),i=n.get(L);return!r.contains(i)}return!0},_bindDDEvents:function(){var t=this,n=t.get(p),r=t.get(H);t.delegate=new e.DD.Delegate(n),t.delegate.dd.plug(e.Plugin.DDProxy,r),t.on("drag:end",e.bind(t._onDragEnd,t)),t.on("drag:enter",e.bind(t._onDragEnter,t)),t.on("drag:exit",e.bind(t._onDragExit,t)),t.on("drag:over",e.bind(t._onDragOver,t)),t.on("drag:start",e.bind(t._onDragStart,t)),t.after("drag:start",e.bind(t._afterDragStart,t)),t.on(V,t._syncPlaceholderUI),t.on($,t._syncPlaceholderUI)},_bindDropZones:function(){var e=this,t=e.get(b);t&&t.each(function(t,n){e.addDropNode(t)})},_defPlaceholderAlign:function(e){var t=this,n=t.activeDrop,r=t.get(D);if(n&&r){var i=n.get("node"),s=!!i.drop;t.lastAlignDrop=n,t.alignPlaceholder(n.get(L).get(F),s)}},_evOutput:function(){var e=this;return{drag:l.activeDrag,drop:e.activeDrop,quadrant:e.quadrant,XDirection:e.XDirection,YDirection:e.YDirection}},_fireQuadrantEvents:function(){var t=this,n=t._evOutput(),r=t.lastQuadrant,i=t.quadrant;i!=r&&(r&&t.fire($,e.merge({lastDrag:t.lastDrag,lastDrop:t.lastDrop,lastQuadrant:t.lastQuadrant,lastXDirection:t.lastXDirection,lastYDirection:t.lastYDirection},n)),t.fire(V,n)),t.fire(J,n),t.lastDrag=l.activeDrag,t.lastDrop=t.activeDrop,t.lastQuadrant=i,t.lastXDirection=t.XDirection,t.lastYDirection=t.YDirection},_getAppendNode:function(){return l.activeDrag.get(L)},_positionNode:function(e){var t=this,n=t.lastAlignDrop||t.activeDrop;if(n){var r=t._getAppendNode(),i=n.get(L),s=u(i.drop),o=t.quadrant<3;if(t._alignCondition())if(s)i[o?_:M](r);else{var a=t.get(y).apply(t,[i]);a[o?P:c](r)}}},_syncPlaceholderUI:function(e){var t=this;t._alignCondition()&&t.fire(X,{drop:t.activeDrop,originalEvent:e})},_syncPlaceholderSize:function(){var e=this,t=e.activeDrop.get(L),n=e.get(D);n&&n.set(O,t.get(O))},_syncProxyNodeUI:function(e){var t=this,n=l.activeDrag.get(m),r=t.get(B);r&&!r.compareTo(n)&&(n.append(r),t._syncProxyNodeSize())},_syncProxyNodeSize:function(){var e=this,t=l.activeDrag.get(L),n=e.get(B);t&&n&&(n.set(A,t.get(A)),n.set(O,t.get(O)))},_afterDragStart:function(e){var t=this;t.get(H)&&t._syncProxyNodeUI(e)},_onDragEnd:function(e){var t=this,n=t.get(D),r=t.get(B);t.lazyEvents||t._positionNode(e),r&&r.remove(),n&&n.hide(),t.lastQuadrant=null,t.lastXDirection=null,t.lastYDirection=null},_onDragEnter:function(e){var t=this;t.activeDrop=l.activeDrop,t.lazyEvents&&t.lastActiveDrop&&(t.lazyEvents=!1,t._syncPlaceholderUI(e)),t.lastActiveDrop||(t.lastActiveDrop=l.activeDrop)},_onDragExit:function(e){var t=this;t._syncPlaceholderUI(e),t.activeDrop=l.activeDrop,t.lastActiveDrop=l.activeDrop},_onDragOver:function(e){var t=this,n=e.drag;t.activeDrop==l.activeDrop&&(t.calculateDirections(n),t.calculateQuadrant(n,t.activeDrop),t._fireQuadrantEvents())},_onDragStart:function(e){var t=this;t.get(T)&&(t.lazyEvents=!0),t.lastActiveDrop=
null,t.activeDrop=l.activeDrop},_setDropNodes:function(e){var t=this;return i(e)&&(e=e.call(t)),tt(e)}}});e.SortableLayout=pt},"2.0.0",{requires:["dd-delegate","dd-drag","dd-drop","dd-proxy","aui-node","aui-component"],skinnable:!0});